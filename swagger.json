{"openapi":"3.0.2","info":{"title":"Canoe club inventory/bookings API","description":"API to manage bookings, inventory, and users for a canoe club or similar sports club.","version":"0.2.0"},"paths":{"/register":{"post":{"tags":["Users"],"summary":"Register new user","description":"Register new user.","operationId":"register_user_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"User data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/token":{"post":{"tags":["Users"],"summary":"Log in","description":"Obtain token for login","operationId":"login_for_access_token_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_token_post"}}},"required":true},"responses":{"200":{"description":"Bearer token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["Users"],"summary":"Get current user","description":"Get current user data.","operationId":"read_users_me_users_me_get","responses":{"200":{"description":"Current user data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/inventory":{"get":{"tags":["Inventory"],"summary":"List items in inventory","description":"List all items in inventory with optional filtering by reference, category, or size.\n\n- **reference**: Optional filter by item reference (partial match)\n- **category**: Optional filter by item category (partial match)\n- **size**: Optional filter by item size (partial match)","operationId":"list_items_inventory_get","parameters":[{"description":"Filter by item reference","required":false,"schema":{"title":"Reference","maxLength":50,"minLength":1,"type":"string","description":"Filter by item reference"},"example":"Green mamba kayak","name":"reference","in":"query"},{"description":"Filter by item category","required":false,"schema":{"title":"Category","maxLength":50,"minLength":1,"type":"string","description":"Filter by item category"},"example":"canoe","name":"category","in":"query"},{"description":"Filter by item size","required":false,"schema":{"title":"Size","maxLength":10,"minLength":1,"type":"string","description":"Filter by item size"},"example":"Large","name":"size","in":"query"}],"responses":{"200":{"description":"List of items","content":{"application/json":{"schema":{"title":"Response List Items Inventory Get","type":"array","items":{"$ref":"#/components/schemas/InventoryRead"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Inventory"],"summary":"Add new item to inventory","description":"Add new item to inventory. Admin access only.","operationId":"create_item_inventory_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryCreate"}}},"required":true},"responses":{"200":{"description":"Item data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/inventory/{id}":{"put":{"tags":["Inventory"],"summary":"Update item in inventory","description":"Update item in inventory by item_id. Admin access only.\n- **item_id**: Unique ID of item.","operationId":"update_item_inventory__id__put","parameters":[{"required":true,"schema":{"title":"Id","type":"integer"},"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryCreate"}}},"required":true},"responses":{"200":{"description":"Updated item data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["Inventory"],"summary":"Delete item in inventory","description":"Delete item in inventory by item_id. Admin access only\n- **item_id**: Unique ID of item.","operationId":"delete_item_inventory__id__delete","parameters":[{"required":true,"schema":{"title":"Id","type":"integer"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/bookings":{"get":{"tags":["Bookings"],"summary":"List all bookings","description":"List all bookings with optional filter on start time/date, end time date, item, and user.\n- **datetime_from**: Optional filter for earliest bookings to show\n- **datetime_until**: Optional filter for latest bookings to show\n- **item_id**: Optional filter for which item to show bookings for\n- **user_id**: Optional filter for which user to show bookings for","operationId":"list_bookings_bookings_get","parameters":[{"description":"Select bookings from","required":false,"schema":{"title":"Datetime From","type":"string","description":"Select bookings from","format":"date-time","default":"2025-11-04T15:40:47.687310"},"name":"datetime_from","in":"query"},{"description":"Select bookings until","required":false,"schema":{"title":"Datetime Until","type":"string","description":"Select bookings until","format":"date-time","default":"2025-11-04T15:40:47.687317"},"name":"datetime_until","in":"query"},{"description":"Item ID to check bookings for","required":false,"schema":{"title":"Item Id","type":"integer","description":"Item ID to check bookings for"},"name":"item_id","in":"query"},{"description":"Show only certain user","required":false,"schema":{"title":"User Id","type":"integer","description":"Show only certain user"},"name":"user_id","in":"query"}],"responses":{"200":{"description":"List of bookings","content":{"application/json":{"schema":{"title":"Response List Bookings Bookings Get","type":"array","items":{"$ref":"#/components/schemas/BookingRead"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Bookings"],"summary":"Create new booking","description":"Create new booking if item is available during requested time.\n- **item_id**: Item requested\n- **start_time**: Start time of booking (datetime)\n- **end_time**: End time of booking (datetime)","operationId":"create_booking_bookings_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreate"}}},"required":true},"responses":{"200":{"description":"Booking data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/bookings/{id}":{"put":{"tags":["Bookings"],"summary":"Update existing booking","description":"Update an existing booking with a new request body (to change booking time or item)\n- **id**: Booking ID","operationId":"update_booking_bookings__id__put","parameters":[{"required":true,"schema":{"title":"Id","type":"integer"},"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreate"}}},"required":true},"responses":{"200":{"description":"Updated booking data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["Bookings"],"summary":"Delete booking","description":"Cancel existing booking. Use /bookings/put to update instead.\n-**id**: Booking ID.","operationId":"delete_booking_bookings__id__delete","parameters":[{"required":true,"schema":{"title":"Id","type":"integer"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"Body_login_for_access_token_token_post":{"title":"Body_login_for_access_token_token_post","required":["username","password"],"type":"object","properties":{"grant_type":{"title":"Grant Type","pattern":"password","type":"string"},"username":{"title":"Username","type":"string"},"password":{"title":"Password","type":"string"},"scope":{"title":"Scope","type":"string","default":""},"client_id":{"title":"Client Id","type":"string"},"client_secret":{"title":"Client Secret","type":"string"}}},"BookingCreate":{"title":"BookingCreate","required":["user_id","item_id","start_time","end_time"],"type":"object","properties":{"user_id":{"title":"User Id","type":"integer"},"item_id":{"title":"Item Id","type":"integer"},"start_time":{"title":"Start Time","type":"string","format":"date-time"},"end_time":{"title":"End Time","type":"string","format":"date-time"}}},"BookingRead":{"title":"BookingRead","required":["user_id","item_id","start_time","end_time","id"],"type":"object","properties":{"user_id":{"title":"User Id","type":"integer"},"item_id":{"title":"Item Id","type":"integer"},"start_time":{"title":"Start Time","type":"string","format":"date-time"},"end_time":{"title":"End Time","type":"string","format":"date-time"},"id":{"title":"Id","type":"integer"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"InventoryCreate":{"title":"InventoryCreate","required":["reference","category","size"],"type":"object","properties":{"reference":{"title":"Reference","type":"string"},"category":{"title":"Category","type":"string"},"size":{"title":"Size","type":"string"}}},"InventoryRead":{"title":"InventoryRead","required":["reference","category","size","id"],"type":"object","properties":{"reference":{"title":"Reference","type":"string"},"category":{"title":"Category","type":"string"},"size":{"title":"Size","type":"string"},"id":{"title":"Id","type":"integer"}}},"Token":{"title":"Token","required":["access_token","token_type"],"type":"object","properties":{"access_token":{"title":"Access Token","type":"string"},"token_type":{"title":"Token Type","type":"string"}}},"UserCreate":{"title":"UserCreate","required":["username","email","password"],"type":"object","properties":{"username":{"title":"Username","type":"string"},"email":{"title":"Email","type":"string"},"is_admin":{"title":"Is Admin","type":"boolean","default":false},"password":{"title":"Password","type":"string"}}},"UserRead":{"title":"UserRead","required":["username","email","id"],"type":"object","properties":{"username":{"title":"Username","type":"string"},"email":{"title":"Email","type":"string"},"is_admin":{"title":"Is Admin","type":"boolean","default":false},"id":{"title":"Id","type":"integer"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"token"}}}}}}